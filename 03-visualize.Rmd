---
title: "Visualization"
output: html_document
---

Explore https://ggplot2.tidyverse.org/ and try what it says under Usage.

```{r}
library(ggplot2)

ggplot(mpg, aes(displ, hwy, colour = class)) +
  geom_point()
```

## Setup

The setup chunk always runs before anything else.

```{r setup}
# install.packages("tidyverse")
library(tidyverse)
```

## Datasets

Copy-paste.

```{r}
ca <- read_csv("https://bit.ly/03-data-ca")
acadia <- read_csv("https://bit.ly/03-data-acadia")
se <- read_csv("https://bit.ly/03-data-se")
visit_16 <- read_csv("https://bit.ly/03-data-visit-16")
mass <- read_csv("https://bit.ly/03-data-mass")
```

- Type `ca` to preview the data. You may also use `head()` or `View()`.

```{r}
ca
```

## Consider

* What relationship do you expect to see between year and the number of visitors to national parks in California, say since early 1900?

* This code uses the data `ca` and represents with points the values of the variables `year` and `visitors`.

```{r}
ggplot(data = ca) +
  geom_point(mapping = aes(x = year, y = visitors))
```

- Now map the values of the variable `park_name` to the `color` aesthetics.

```{r}
ggplot(data = ca) +
  geom_point(mapping = aes(x = year, y = visitors, color = park_name))
```

## Set vs map

* Set the colour of all points to blue.

```{r}
ggplot(data = ca) +
  geom_point(mapping = aes(x = year, y = visitors), color = "blue")
```

- What is wrong in this code?

```{r}
ggplot(data = ca) +
  geom_point(mapping = aes(x = year, y = visitors, color = "blue"))
```

## Facet

* Add `facet_wrap(~ park_name)` to facet (split) the data by `park_name`. The plot is now clear evern without colour.

(I'll ommit the name of the first arguments. They are optional.)

```{r}
ggplot(ca) +
  geom_point(aes(x = year, y = visitors)) +
  facet_wrap(~ park_name)
```

## Geoms


* Instead of representing you data with points, we now use a smooth mean of the data.

```{r}
ggplot(ca) +
  geom_smooth(aes(x = year, y = visitors)) 
```

(Smoothers fit a model to your data and then plot predictions from the model.)

- Use `geom_line()` and `color = park_name` to compare each park against the overall trend.

```{r}
ggplot(ca) +
  geom_line(aes(x = year, y = visitors, color = park_name)) +
  geom_smooth(aes(x = year, y = visitors)) 
```

* Use `geom_bar()` to create a bar chart  FIXME

```{r}
ggplot(ca) +
  geom_bar(aes(x = park_name))
```

(Bar charts, histograms, and frequency polygons bin your data and then plot bin counts, the number of points that fall in each bin.)

## Arranging and exporting plots


## Leftovers



***

# Take aways

You can use this code template to make thousands of graphs with **ggplot2**.

```{r eval = FALSE}
ggplot(data = <DATA>) +
  <GEOM_FUNCTION>(mapping = aes(<MAPPINGS>))
```
