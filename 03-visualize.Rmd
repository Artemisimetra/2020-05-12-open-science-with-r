---
title: "Visualization"
output: html_document
---

## Setup

The first chunk in an R Notebook is usually titled "setup," and by convention includes the R packages you want to load. Remember, in order to use an R package you have to run some `library()` code every session. Execute these lines of code to load the packages. 

## Your turn 1

```{r setup}
# install.packages("tidyverse")
library(tidyverse)
```

## Data

- Create the dataset `ca`, by reading with the .csv data of National Parks in California at "https://bit.ly/03-data-ca", with the function `read_csv()`.

```{r}
ca <- read_csv("https://bit.ly/03-data-ca")
```

- Type `ca` to preview the data. You may also use `head()` or `View()`.

```{r}
ca
```

## Consider

* What relationship do you expect to see between year and the number of visitors to national parks in California, say since early 1900?

* This code uses the data `ca` and represents with points the values of the variables `year` and `visitors`.

```{r}
ggplot(data = ca) +
  geom_point(mapping = aes(x = year, y = visitors))
```

- Now map the values of the variable `park_name` to the `color` aesthetics.

```{r}
ggplot(data = ca) +
  geom_point(mapping = aes(x = year, y = visitors, color = park_name))
```

## Set vs map

* Set the colour of all points to blue.

```{r}
ggplot(data = ca) +
  geom_point(mapping = aes(x = year, y = visitors), color = "blue")
```

- What is wrong in this code?

```{r}
ggplot(data = ca) +
  geom_point(mapping = aes(x = year, y = visitors, color = "blue"))
```

## Facet

* Add `facet_wrap(~ park_name)` to facet (split) the data by `park_name`. The plot is now clear evern without colour.

(I'll ommit the name of the first arguments. They are optional.)

```{r}
ggplot(ca) +
  geom_point(aes(x = year, y = visitors)) +
  facet_wrap(~ park_name)
```

## Geoms


* Instead of representing you data with points, we now use a smooth mean of the data.

```{r}
ggplot(ca) +
  geom_smooth(aes(x = year, y = visitors)) 
```

(Smoothers fit a model to your data and then plot predictions from the model.)

- Use `geom_line()` and `color = park_name` to compare each park against the overall trend.

```{r}
ggplot(ca) +
  geom_line(aes(x = year, y = visitors, color = park_name)) +
  geom_smooth(aes(x = year, y = visitors)) 
```

* Use `geom_bar()` to create a bar chart  FIXME

```{r}
ggplot(ca) +
  geom_bar(aes(x = park_name))
```

(Bar charts, histograms, and frequency polygons bin your data and then plot bin counts, the number of points that fall in each bin.)

## Arranging and exporting plots


## Leftovers



***

# Take aways

You can use this code template to make thousands of graphs with **ggplot2**.

```{r eval = FALSE}
ggplot(data = <DATA>) +
  <GEOM_FUNCTION>(mapping = aes(<MAPPINGS>))
```
